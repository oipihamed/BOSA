"use strict";(self.webpackChunkbosa_app=self.webpackChunkbosa_app||[]).push([[411],{8411:(T,x,i)=>{i.d(x,{H:()=>y});var a=i(4006),p=i(5412),g=i(7579),h=i(2722),t=i(4650),C=i(5109),E=i(8423),f=i(6895),u=i(9549),l=i(3546),O=i(4144),s=i(4859),d=i(3238),M=i(4385),b=i(7392);function A(e,c){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.getErrorMessage("nombre")," ")}}function I(e,c){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.getErrorMessage("descripcion")," ")}}function v(e,c){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.getErrorMessage("precio")," ")}}function Z(e,c){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.getErrorMessage("cantidad")," ")}}function D(e,c){1&e&&t._UZ(0,"div")}function U(e,c){if(1&e&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&e){const o=c.$implicit,n=c.index;t.Q6J("value",o.idCategoria),t.uIk("data-index",n),t.xp6(1),t.Oqu(o.nombre)}}function R(e,c){if(1&e&&(t.TgZ(0,"mat-select",20)(1,"mat-option",21),t._uU(2,"Ninguno"),t.qZA(),t.YNc(3,U,2,3,"mat-option",22),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("value",0),t.xp6(2),t.Q6J("ngForOf",o.categorias)}}function B(e,c){1&e&&(t.TgZ(0,"mat-select",20)(1,"mat-option",21),t._uU(2,"Ninguno"),t.qZA(),t.TgZ(3,"mat-option",23),t._uU(4,"Uniforme"),t.qZA(),t.TgZ(5,"mat-option",23),t._uU(6,"Calzado"),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("value",0),t.xp6(2),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2))}function N(e,c){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.getErrorMessage("categoria")," ")}}function L(e,c){1&e&&t._UZ(0,"div")}function F(e,c){if(1&e){const o=t.EpF();t.TgZ(0,"div",27)(1,"img",28),t.NdJ("click",function(){t.CHM(o),t.oxw();const r=t.MAs(1);return t.KtG(r.click())}),t.qZA()()}if(2&e){const o=c.$implicit;t.uIk("data-index",c.index),t.xp6(1),t.Q6J("src",o||"./../assets/images/SubirArch.webp",t.LSH)}}function K(e,c){if(1&e){const o=t.EpF();t.TgZ(0,"input",24,25),t.NdJ("change",function(r){t.CHM(o);const _=t.oxw();return t.KtG(_.onPhotoSelected(r))}),t.qZA(),t.YNc(2,F,2,2,"div",26)}if(2&e){const o=t.oxw();t.xp6(2),t.Q6J("ngForOf",o.photoSelected)}}function k(e,c){1&e&&t._UZ(0,"div")}function J(e,c){if(1&e){const o=t.EpF();t.TgZ(0,"div",27)(1,"img",28),t.NdJ("click",function(){t.CHM(o),t.oxw();const r=t.MAs(1);return t.KtG(r.click())}),t.qZA()()}if(2&e){const o=c.$implicit;t.uIk("data-index",c.index),t.xp6(1),t.Q6J("src","./../"+o.rutaImagen||0,t.LSH)}}function W(e,c){if(1&e){const o=t.EpF();t.TgZ(0,"input",31,25),t.NdJ("change",function(r){t.CHM(o);const _=t.oxw(2);return t.KtG(_.onPhotoSelected(r))}),t.qZA(),t.YNc(2,J,2,2,"div",26)}if(2&e){const o=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",o.photosBD)}}function S(e,c){if(1&e){const o=t.EpF();t.TgZ(0,"div",27)(1,"input",31,25),t.NdJ("change",function(r){t.CHM(o);const _=t.oxw(2);return t.KtG(_.onPhotoSelected(r))}),t.qZA(),t.TgZ(3,"img",28),t.NdJ("click",function(){t.CHM(o);const r=t.MAs(2);return t.KtG(r.click())}),t.qZA()(),t.TgZ(4,"div",27)(5,"img",28),t.NdJ("click",function(){t.CHM(o);const r=t.MAs(2);return t.KtG(r.click())}),t.qZA()(),t.TgZ(6,"div",27)(7,"img",28),t.NdJ("click",function(){t.CHM(o);const r=t.MAs(2);return t.KtG(r.click())}),t.qZA()()}2&e&&(t.xp6(3),t.Q6J("src","./../assets/images/SubirArch.webp",t.LSH),t.xp6(2),t.Q6J("src","./../assets/images/SubirArch.webp",t.LSH),t.xp6(2),t.Q6J("src","./../assets/images/SubirArch.webp",t.LSH))}function w(e,c){if(1&e&&(t.YNc(0,k,1,0,"div",11),t.YNc(1,W,3,1,"ng-template",null,29,t.W1O),t.YNc(3,S,8,3,"ng-template",null,30,t.W1O)),2&e){const o=t.MAs(2),n=t.MAs(4),r=t.oxw();t.Q6J("ngIf",r.photosBD.length>0)("ngIfThen",o)("ngIfElse",n)}}var m=(()=>{return(e=m||(m={})).EDIT="edit",e.NEW="new",m;var e})();let y=(()=>{class e{constructor(o,n,r,_,P){this.data=o,this.dialogRef=n,this.fb=r,this.productSvc=_,this.spinner=P,this.actionTODO=m.NEW,this.destroy$=new g.x,this.titleButton="Guardar",this.categorias=[],this.productoForm=this.fb.group({idProducto:[""],nombre:["",[a.kI.required,a.kI.minLength(1),a.kI.maxLength(20)]],descripcion:["",[a.kI.required,a.kI.minLength(1),a.kI.maxLength(100)]],precio:["",[a.kI.required,a.kI.min(0)]],cantidad:["",[a.kI.required,a.kI.min(0)]],categoria:["",[a.kI.required]],rutaImagen:["",[a.kI.required]]}),this.photoSelected=[],this.photosBD=[]}ngOnDestroy(){this.destroy$.next({}),this.destroy$.complete()}onClean(){this.productoForm.reset()}agregarProducto(){if(this.productoForm.invalid)return;const o=this.productoForm.getRawValue();this.spinner.show(),this.actionTODO==m.NEW?this.productSvc.agregarProducto(o).subscribe(r=>{this.onClean(),this.spinner.hide(),this.dialogRef.close(r)}):this.productSvc.update({idProducto:o.idProducto,nombre:o.nombre,descripcion:o.descripcion,precio:o.precio,cantidadExostencia:o.cantidad,categoria:o.categoria,rutaImagen:o.rutaImagen}).pipe((0,h.R)(this.destroy$)).subscribe(r=>{this.dialogRef.close(r)})}patchData(){if(this.data.producto.idProducto){this.actionTODO=m.EDIT,this.titleButton="ACTUALIZAR";var o="";this.productSvc.getAllImgProduct(this.data.producto.idProducto).subscribe(n=>{this.photosBD=n,this.photosBD.length>0&&(this.photosBD.forEach(r=>{o+=r.rutaImagen+"$$"}),o=o.substring(0,o.length-2),console.log(o)),this.productoForm.patchValue(o.length>0?{idProducto:this.data?.producto.idProducto,nombre:this.data?.producto.nombre,descripcion:this.data?.producto.descripcion,cantidad:this.data?.producto.cantidadExistencia,precio:this.data?.producto.precio,categoria:this.data?.producto.idCategoria,rutaImagen:o}:{idProducto:this.data?.producto.idProducto,nombre:this.data?.producto.nombre,descripcion:this.data?.producto.descripcion,cantidad:this.data?.producto.cantidadExistencia,precio:this.data?.producto.precio,categoria:this.data?.producto.idCategoria,rutaImagen:this.data?.producto.rutaImagen})}),console.log(this.photosBD),console.log(this.productoForm),this.productoForm.updateValueAndValidity()}else this.titleButton="GUARDAR",this.actionTODO=m.NEW}onPhotoSelected(o){this.photoSelected=[];const n=o.target;if(null!=o&&n.files&&n.files[0])for(let r=0;r<n.files.length;r++){this.file=n.files[r];const _=new FileReader;_.onload=P=>null!=_.result?(this.photoSelected.push(_.result),console.log(_.result),this.productoForm.patchValue({rutaImagen:this.photoSelected.join("$$")}),this.photoSelected):this.photoSelected,_.readAsDataURL(this.file)}}getErrorMessage(o){let n="";var r=this.productoForm.get(o);return null!=r&&(r.hasError("required")?n="Campo requerido":r.hasError("minlength")?n="El minimo de caracteres son 5":r.hasError("maxlength")&&(n="Mas de los caracteres permitidos")),n}isValidField(o){var n=this.productoForm.get(o),r=!1;return null!=n&&(r=n.touched||n.dirty&&!n.valid),r}ngOnInit(){this.productSvc.getCategorias().pipe((0,h.R)(this.destroy$)).subscribe(o=>{this.categorias=o,this.patchData()})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(p.WI),t.Y36(p.so),t.Y36(a.qu),t.Y36(C.U),t.Y36(E.t2))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-productos"]],decls:54,vars:15,consts:[["mat-dialog-title",""],[1,"login-form"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-6","br-right"],[1,"full-width"],["type","text","formControlName","nombre","matInput",""],[4,"ngIf"],["type","text","formControlName","descripcion","matInput",""],["type","number","formControlName","precio","matInput",""],["type","number","formControlName","cantidad","matInput",""],[4,"ngIf","ngIfThen","ngIfElse"],["thenC",""],["elseC",""],[1,"col-6"],["thenBlock",""],["elseBlock",""],["type","submit","mat-raised-button","","color","warm",1,"bRegistrar",3,"disabled"],["align","end"],["mat-button","","mat-dialog-close",""],["matNativeControl","","formControlName","categoria"],["selected","",3,"value"],["selected","",3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","file","hidden","","multiple","","accept",".jpg,.png",1,"file-upload",3,"change"],["photoInput",""],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12"],[1,"imgR",3,"src","click"],["thenP",""],["elseP",""],["type","file","hidden","","multiple","","accept",".png",1,"file-upload",3,"change"]],template:function(o,n){if(1&o&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"div",1)(4,"h1"),t._uU(5,"AGREGAR/ EDITAR PRODUCTO"),t.qZA(),t.TgZ(6,"mat-card")(7,"mat-card-content")(8,"form",2),t.NdJ("ngSubmit",function(){return n.agregarProducto()}),t.TgZ(9,"div",3)(10,"div",4)(11,"mat-form-field",5)(12,"mat-label"),t._uU(13,"Nombre del producto"),t.qZA(),t._UZ(14,"input",6),t.YNc(15,A,2,1,"mat-error",7),t.qZA(),t.TgZ(16,"mat-form-field",5)(17,"mat-label"),t._uU(18,"Descripcion"),t.qZA(),t._UZ(19,"textarea",8),t.YNc(20,I,2,1,"mat-error",7),t.qZA(),t.TgZ(21,"mat-form-field",5)(22,"mat-label"),t._uU(23,"Precio"),t.qZA(),t._UZ(24,"input",9),t.YNc(25,v,2,1,"mat-error",7),t.qZA(),t.TgZ(26,"mat-form-field",5)(27,"mat-label"),t._uU(28,"Cantidad"),t.qZA(),t._UZ(29,"input",10),t.YNc(30,Z,2,1,"mat-error",7),t.qZA(),t.TgZ(31,"mat-form-field",5)(32,"mat-label"),t._uU(33," Categoria"),t.qZA(),t.YNc(34,D,1,0,"div",11),t.YNc(35,R,4,2,"ng-template",null,12,t.W1O),t.YNc(37,B,7,3,"ng-template",null,13,t.W1O),t.YNc(39,N,2,1,"mat-error",7),t.qZA(),t._UZ(40,"div"),t.qZA(),t.TgZ(41,"div",14),t.YNc(42,L,1,0,"div",11),t.YNc(43,K,3,1,"ng-template",null,15,t.W1O),t.YNc(45,w,5,3,"ng-template",null,16,t.W1O),t.TgZ(47,"button",17),t._uU(48),t.qZA()()()()()()()(),t.TgZ(49,"mat-dialog-actions",18)(50,"button",19)(51,"mat-icon"),t._uU(52,"close"),t.qZA(),t._uU(53," Cerrar "),t.qZA()()),2&o){const r=t.MAs(36),_=t.MAs(38),P=t.MAs(44),Y=t.MAs(46);t.xp6(1),t.Oqu(null==n.data?null:n.data.title),t.xp6(7),t.Q6J("formGroup",n.productoForm),t.xp6(7),t.Q6J("ngIf",n.isValidField("nombre")),t.xp6(5),t.Q6J("ngIf",n.isValidField("descripcion")),t.xp6(5),t.Q6J("ngIf",n.isValidField("precio")),t.xp6(5),t.Q6J("ngIf",n.isValidField("cantidad")),t.xp6(4),t.Q6J("ngIf",n.categorias.length>0)("ngIfThen",r)("ngIfElse",_),t.xp6(5),t.Q6J("ngIf",n.isValidField("categoria")),t.xp6(3),t.Q6J("ngIf",n.photoSelected.length>0)("ngIfThen",P)("ngIfElse",Y),t.xp6(5),t.Q6J("disabled",n.productoForm.invalid),t.xp6(1),t.Oqu(n.titleButton)}},dependencies:[f.sg,f.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,u.TO,u.KE,u.hX,l.a8,l.dn,O.Nt,s.lW,p.ZT,p.uh,p.xY,p.H8,d.ey,M.gD,b.Hw],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{background:#ecf0f3}h1[_ngcontent-%COMP%]{margin:0;padding:0}h5[_ngcontent-%COMP%]{font-weight:200}.m-10[_ngcontent-%COMP%]{margin-top:20px}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:90%;border-radius:2px;padding:1rem;border:solid #9B9B9B 2px!important}mat-select[_ngcontent-%COMP%]{display:block;width:96%;border-radius:2px;padding:1rem;border:solid #9B9B9B 2px!important}.login-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block;width:90%;min-height:120px;border-radius:2px;padding:1rem;border:solid #9B9B9B 2px!important}input[_ngcontent-%COMP%]::-webkit-inner-spin-button{position:absolute;top:0;right:0;bottom:0;width:1em;border-left:1px solid #bbb;opacity:.5}.bCancelar[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.15em;border:none;font-size:.875rem;color:#fff;font-weight:700;background-color:#ebebeb;width:100%;display:block;padding:.875rem 1rem;border-radius:1px;cursor:pointer}.bRegistrar[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.15em;border:none;font-size:.875rem;color:#fff;font-weight:700;background-color:#606060;width:100%;display:block;padding:.875rem 1rem;border-radius:1px;box-shadow:1px 1px 1px #b1b1b1,-1px -1px #fff;cursor:pointer}.login-form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#606060;font-weight:300;margin-top:10px}.contenedorTitulo[_ngcontent-%COMP%]{margin-top:60px;min-height:150px;max-height:200px;background-color:#f8f8f8}.tituloRI[_ngcontent-%COMP%]{color:#444}.tituloRI[_ngcontent-%COMP%]:hover{color:#9d9d9d}.row[_ngcontent-%COMP%]{max-width:100%;margin-left:0;margin-right:0;padding:0 40px}.col_Ti[_ngcontent-%COMP%]{min-height:150px;border-bottom:solid #444444 2px;transition:.5s;padding-top:90px;margin-bottom:50px}.col_Ti[_ngcontent-%COMP%]:hover, .active[_ngcontent-%COMP%]{border-bottom:solid #adadad 2px}.imgR[_ngcontent-%COMP%]{width:60%;height:120px;margin-bottom:30px;border-radius:10px}.login-form[_ngcontent-%COMP%]{padding:4rem 1rem}.br-right[_ngcontent-%COMP%]{border-right:solid rgba(128,128,128,.2) 2px}mat-card[_ngcontent-%COMP%]{max-width:100%;margin:2rem auto;text-align:center}.full-width[_ngcontent-%COMP%]{max-width:90%;display:block;width:90%}button[_ngcontent-%COMP%]{width:40%;display:inline-block;cursor:pointer}  .mat-form-field-underline{display:none}"]}),e})()},5109:(T,x,i)=>{i.d(x,{U:()=>u});var a=i(2340),p=i(4004),g=i(262),h=i(2843),t=i(4650),C=i(529),E=i(3060),f=i(7009);let u=(()=>{class l{constructor(s,d,M){this.http=s,this.router=d,this.snackBar=M}agregarProducto(s){return this.http.post(`${a.N.API_URL}/producto`,s).pipe((0,p.U)(d=>(this.snackBar.open(d.message,"",{duration:5e3,panelClass:["success-snackbar"],horizontalPosition:"right",verticalPosition:"top"}),d)),(0,g.K)(d=>this.handlerError(d)))}delete(s){return this.http.delete(`${a.N.API_URL}/producto/${s}`)}update(s){return this.http.put(`${a.N.API_URL}/producto`,s).pipe((0,g.K)(d=>this.handlerError(d)))}getAllImgProduct(s){return this.http.get(`${a.N.API_URL}/producto/img/${s}`).pipe((0,g.K)(d=>this.handlerError(d)))}getCategorias(){return this.http.get(`${a.N.API_URL}/categoria`).pipe((0,g.K)(s=>this.handlerError(s)))}handlerError(s){let d="Ocurrio un error";return s&&(d=`${s.message}`),this.snackBar.open(d,"",{duration:5e3,panelClass:["error-snackbar"],horizontalPosition:"right",verticalPosition:"top"}),(0,h._)(d)}}return l.\u0275fac=function(s){return new(s||l)(t.LFG(C.eN),t.LFG(E.F0),t.LFG(f.ux))},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()}}]);