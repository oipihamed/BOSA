"use strict";(self.webpackChunkbosa_app=self.webpackChunkbosa_app||[]).push([[915],{6915:(J,f,a)=>{a.r(f),a.d(f,{NewpasswordModule:()=>A});var b=a(6895),u=a(3546),m=a(3060),Z=a(5861),n=a(4006),r=a(4650),C=a(8409),P=a(252),c=a(5412),y=a(8423),N=a(7009),h=a(4859),d=a(9549),g=a(7392),v=a(4144);let F=(()=>{class o{constructor(e,t,s,w,l,U,M){this.baseForm=e,this.authSvc=t,this.fb=s,this.dialog=w,this.spinner=l,this.snackBar=U,this.ruta=M,this.hide=!0,this.newPasswordForm=this.fb.group({password:["",[n.kI.required,n.kI.minLength(5),p.cannotContainSpace,n.kI.pattern("^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=])(?=\\S+$).{5,}$")]],confirmPassword:["",[n.kI.required,n.kI.minLength(5),p.cannotContainSpace]],restore:["",[n.kI.required]]},{asyncValidator:p.checkPasswords("password","confirmPassword")}),this.restore=[],this.ruta.params.subscribe(I=>{this.restore=I.restore,this.newPasswordForm.controls.restore.setValue(this.restore)})}ngOnInit(){}onNewPassword(){this.newPasswordForm.invalid||this.authSvc.newPassword(this.newPasswordForm.value).subscribe(t=>{console.log(t),this.spinner.hide(),this.snackBar.open("La contrase\xf1a cambio","",{duration:5e3,panelClass:["success-snackbar"],horizontalPosition:"right",verticalPosition:"top"})})}getErrorMessage(e){let t="";var s=this.newPasswordForm.get(e);return null!=s&&(t=s.hasError("required")?"Campo requerido":s.hasError("password")?"Se requiere de una contrase\xf1a":s.hasError("cannotContainSpace")?"El nombre de usuario no puede contener espacios":s.hasError("notSame")?"La contrase\xf1a no coincide":"La contrase\xf1a 5 caracteres entre los que debe incluir \n una letra mayuscula, minuscula y un caracter especial"),t}isValidField(e){var t=this.newPasswordForm.get(e),s=!1;return null!=t&&(s=t.touched||t.dirty&&!t.valid),s}}return o.\u0275fac=function(e){return new(e||o)(r.Y36(C.I),r.Y36(P.e),r.Y36(n.qu),r.Y36(c.uw),r.Y36(y.t2),r.Y36(N.ux),r.Y36(m.gz))},o.\u0275cmp=r.Xpm({type:o,selectors:[["app-newpassword"]],decls:41,vars:11,consts:[[1,"newPassword"],[1,"recovery-card",2,"margin-left","30%","margin-top","0%","position","initial"],[3,"formGroup","ngSubmit"],["apperance","outline",1,"full-width"],["formControlName","password","matInput","","autocomplete","new-password",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["formControlName","confirmPassword","matInput","","autocomplete","new-password",3,"type"],["confirmPassword",""],["apperance","outline",1,"full-width",2,"display","none"],["type","text","formControlName","restore","matInput","","hidden","",3,"value"],["type","submit","mat-raised-button","","color","warm",3,"disabled"]],template:function(e,t){1&e&&(r._UZ(0,"br")(1,"br")(2,"br")(3,"br")(4,"br")(5,"br")(6,"br"),r.TgZ(7,"mat-dialog-content",0)(8,"mat-card",1)(9,"mat-card-subtitle"),r._uU(10,"Haz pedido un cambio de contrase\xf1a"),r.qZA(),r.TgZ(11,"mat-card-title"),r._uU(12,"Nueva Contrase\xf1a"),r.qZA(),r.TgZ(13,"mat-card-content")(14,"p"),r._uU(15,"Agrega tu nueva contrase\xf1a"),r.qZA()(),r.TgZ(16,"form",2),r.NdJ("ngSubmit",function(){return t.onNewPassword()}),r.TgZ(17,"mat-form-field",3)(18,"mat-label"),r._uU(19,"Nueva Contrase\xf1a"),r.qZA(),r._UZ(20,"input",4),r.TgZ(21,"button",5),r.NdJ("click",function(){return t.hide=!t.hide}),r.TgZ(22,"mat-icon"),r._uU(23),r.qZA()(),r.TgZ(24,"mat-error"),r._uU(25),r.qZA()(),r.TgZ(26,"mat-form-field",3)(27,"mat-label"),r._uU(28,"Confirmar Contrase\xf1a"),r.qZA(),r._UZ(29,"input",6,7),r.TgZ(31,"button",5),r.NdJ("click",function(){return t.hide=!t.hide}),r.TgZ(32,"mat-icon"),r._uU(33),r.qZA()(),r.TgZ(34,"mat-error"),r._uU(35),r.qZA()(),r.TgZ(36,"mat-form-field",8),r._UZ(37,"input",9),r.qZA(),r.TgZ(38,"mat-card-actions")(39,"button",10),r._uU(40,"Crear nueva contrase\xf1a"),r.qZA()()()()()),2&e&&(r.xp6(8),r.ekj("mat-elevation-z8",!0),r.xp6(8),r.Q6J("formGroup",t.newPasswordForm),r.xp6(4),r.Q6J("type",t.hide?"password":"text"),r.xp6(3),r.hij(" ",t.hide?"visibility_off":"visibility"," "),r.xp6(2),r.hij(" ",t.baseForm.getErrorMessage(t.newPasswordForm.get("password"))," "),r.xp6(4),r.Q6J("type",t.hide?"password":"text"),r.xp6(4),r.hij(" ",t.hide?"visibility_off":"visibility"," "),r.xp6(2),r.hij(" ",t.baseForm.getErrorMessage(t.newPasswordForm.get("confirmPassword"))," "),r.xp6(2),r.s9C("value",t.restore),r.xp6(2),r.Q6J("disabled",t.newPasswordForm.invalid))},dependencies:[u.a8,u.dn,u.n5,u.$j,u.hq,h.lW,c.xY,d.TO,d.KE,d.hX,d.R9,g.Hw,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,v.Nt],styles:[".newPasswordForm[_ngcontent-%COMP%]{padding:4rem 1rem}mat-card[_ngcontent-%COMP%]{max-width:40%;margin:2rem auto;text-align:center}.full-width[_ngcontent-%COMP%]{max-width:100%;display:block;margin:2rem 0;width:100%}button[_ngcontent-%COMP%]{width:70%;display:inline-block;cursor:pointer}"]}),o})();class p{static cannotContainSpace(i){return i.value.indexOf(" ")>=0?{required:!0}:null}static checkPasswords(i,e){return function(){var t=(0,Z.Z)(function*(s){const l=s.controls[e];l.setErrors(s.controls[i].value!==l.value?{notSame:!0}:null)});return function(s){return t.apply(this,arguments)}}()}}const T=[{path:"",component:F}];let S=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({imports:[m.Bz.forChild(T),m.Bz]}),o})(),A=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({imports:[b.ez,S,u.QW,h.ot,c.Is,d.lN,g.Ps,n.UX,v.c]}),o})()}}]);